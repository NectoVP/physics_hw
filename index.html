<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Птицын Влад ДЗ М3203</title>
    <style>
        body { margin: 0; }
        canvas { display: block; }
        #input-container { text-align: center; margin-top: 20px; }
        #input-container div { margin-bottom: 10px; }
    </style>
</head>
<body>
    <div id="input-container">
        <div>
            <label for="len">Длина волны, нМ: </label>
            <input type="number" id="len" class="len" value="100">
        </div>
        <div>
            <label for="prelom1">Показатель преломления, n1: </label>
            <input type="number" id="prelom1" class="prelom1" value="1">
        </div>
        <div>
            <label for="prelom2">Показатель преломления, n2: </label>
            <input type="number" id="prelom2" class="prelom2" value="1">
        </div>
        <div>
            <label for="holes">Расстояние между щелями, м</label>
            <input type="number" id="holes" class="holes" value="0.05">
        </div>
        <div>
            <label for="dist">Расстояние до экрана, м</label>
            <input type="number" id="dist" class="dist" value="1">
        </div>
        <div>
            <button>Построить графики</button>
        </div>
    </div>

    <div id="graph-container">
        <div class="graph" id="graph"></div>
    </div>

    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <script>
        document.querySelector('button').onclick = updateGraph;

        function updateGraph() {
        
            let len = parseFloat(document.querySelector('.len').value) / (10**9);
            let prelom1 = parseFloat(document.querySelector('.prelom1').value);
            let prelom2 = parseFloat(document.querySelector('.prelom2').value);
            let wid = parseFloat(document.querySelector('.holes').value);
            let dist = parseFloat(document.querySelector('.dist').value);
            
            if (isNaN(len) || len <= 0 || isNaN(prelom1) || prelom1 <= 0 || isNaN(prelom2) || prelom2 < 0 || isNaN(wid) || wid < 0 || isNaN(dist) || dist < 0) {
                alert("введены некорректные значения");
                return;
            }
            
            shapes = [];
            let width = len * dist / wid;
            console.log(width);
            width = 10; 
            let range = 1000;
            let flag = 1;
            let intensity_0 = 1;
            let intensity = 4 * intensity_0 * Math.cos(Math.PI / len * dist * prelom1 / wid) ** 2;
            for(let i = 0; i < range; flag++, i+=width) {
                if(i + width > range)
                    break;
                let intensity = 4 * intensity_0 * Math.cos(Math.PI / len * dist * prelom1 / wid) ** 2;
                let color='rgba(225, 232, 107, 0.5)'
                if(flag % 2 != 0)
                    color='rgba(225, 232, 107, 0.8)'
                shapes.push(
                    {
                    type: 'rect',
                    xref: 'x',
                    yref: 'y',
                    x0: i,
                    y0: 0,
                    x1: i + width,
                    y1: 2,
                    line: {
                        color: 'rgb(225, 232, 107)',
                        width: 3
                    },
                    fillcolor: color
                    }
                )
            }

            var layout = {
                title: 'Интерфереционная картина',
                xaxis: {
                    visible: false,
                    showgrid: true,
                    range: [-range, range]
                },
                yaxis: {
                    range: [0, 2],
                    visible: false,
                    showgrid: true
                },
                height: 600,
                shapes: shapes
            };

            var data = [];

            Plotly.newPlot('graph', data, layout);
        }
        updateGraph();
    </script>
</body>
</html>
